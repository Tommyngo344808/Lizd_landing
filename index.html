<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NaMat LIZD</title>

  <style>
    :root{
      --brand:#7856EA;--text:#1F2937;--muted:#6B7280;--bg:#F8FAFC;--card:#FFFFFF;
      --border:#E5E7EB;--green:#0A7C2E;--blue:#2563EB
    }
    *{box-sizing:border-box}html,body{margin:0;padding:0}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);background:#fff}

    .container{max-width:1200px;margin:0 auto;padding:0 16px}

    /* ---------- HERO ---------- */
    .hero-wrap{margin:22px auto}
    .hero{
      position:relative;border-radius:24px;overflow:hidden;
      background:linear-gradient(180deg,rgba(120,86,234,.12),rgba(120,86,234,0))
    }
    .hero-bg{position:absolute;inset:0;background-size:cover;background-position:center}
    .hero::after{content:"";position:absolute;inset:0;background:rgba(255,255,255,.38)}
    .hero-inner{position:relative;z-index:1;padding:56px 20px}
    .kicker{display:inline-block;background:#fff;color:var(--brand);border:1px solid rgba(0,0,0,.06);
      border-radius:999px;padding:8px 12px;font-weight:700;font-size:12px;letter-spacing:.04em}
    .hero h1{font-size:clamp(28px,4vw,44px);line-height:1.15;margin:14px 0 10px}
    .hero p{max-width:760px;color:var(--text);font-size:clamp(14px,2.2vw,18px)}
    .cta{margin-top:18px;display:flex;gap:12px;flex-wrap:wrap}
    .btn{border:0;border-radius:14px;padding:12px 18px;font-weight:700;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center}
    .btn-primary{background:var(--brand);color:#fff}
    .btn-ghost{background:#fff;color:var(--brand);border:1px solid rgba(120,86,234,.25)}

    /* ---------- PRODUCTS ---------- */
    .section-title{margin:28px 0 12px;font-weight:900;font-size:22px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{grid-column:span 12;background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
    .thumb{width:100%;aspect-ratio:4/3;object-fit:cover;background:#F3F4F6;cursor:pointer}
    .body{padding:12px}
    .title{font-weight:800;margin:4px 0 6px;font-size:15px;cursor:pointer}
    .price{color:var(--green);font-weight:800}
    .plink{color:var(--blue);text-decoration:none;font-weight:700}
    @media(min-width:640px){.card{grid-column:span 6}}
    @media(min-width:960px){.card{grid-column:span 4}}

    /* ---------- MODAL ---------- */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:50;padding:16px}
    .modal.show{display:flex}
    .modal-card{max-width:900px;width:100%;background:#fff;border-radius:16px;overflow:hidden;display:grid;grid-template-columns:1fr;gap:0}
    .modal-img{width:100%;max-height:60vh;object-fit:cover;background:#F3F4F6}
    .modal-body{padding:16px}
    .modal-title{font-weight:900;font-size:20px;margin:0 0 8px}
    .modal-desc{color:var(--muted);line-height:1.6;margin:0 0 10px}
    .modal-price{font-weight:900;color:var(--green)}
    .modal-actions{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
    .close{position:absolute;top:10px;right:12px;background:#111827;color:#fff;border:0;border-radius:10px;padding:8px 10px;cursor:pointer}
    @media(min-width:900px){
      .modal-card{grid-template-columns:1fr 1fr}
      .modal-img{height:100%;max-height:none}
    }

    /* ---------- FOOTER ---------- */
    footer{background:var(--bg);border-top:1px solid var(--border);margin-top:44px}
    .ft{padding:22px 0}
    .ft-title{font-weight:900;margin-bottom:8px}
    .ft-text{color:var(--text);line-height:1.7}
    .copy{border-top:1px solid var(--border);padding:12px 0;color:#6B7280;font-size:13px}

    /* ---------- ADMIN BTN ---------- */
    #admin-btn{position:fixed;right:18px;bottom:18px;background:#111827;color:#fff;border-radius:10px;padding:10px 14px;font-size:13px;text-decoration:none;box-shadow:0 6px 20px rgba(0,0,0,.18);opacity:.85;z-index:99}
    #admin-btn:hover{opacity:1;background:var(--brand)}
  </style>
</head>
<body>

  <!-- HERO -->
  <div class="container hero-wrap">
    <section class="hero">
      <div class="hero-bg" id="heroBg"></div>
      <div class="hero-inner">
        <span class="kicker" id="heroKicker">S·∫¢N PH·∫®M TH√ÅNG 8</span>
        <h1 id="heroTitle">NaMat LIZD - Gi·∫£i ph√°p m√°t l·∫°nh cho m√πa h√®</h1>
        <p id="heroDesc">ChƒÉn l·∫°nh Premium, Cool Fiber, g·ªëi tr·∫ª em‚Ä¶ gi·∫£m ƒë·∫øn 40%</p>
        <div class="cta">
          <a class="btn btn-primary" id="cta1" href="#products">Xem s·∫£n ph·∫©m</a>
          <a class="btn btn-ghost" id="cta2" href="/chinh-sach">Xem ch√≠nh s√°ch</a>
        </div>
      </div>
    </section>
  </div>

  <!-- PRODUCTS -->
  <section class="container" id="products">
    <h2 class="section-title">S·∫¢N PH·∫®M TH√ÅNG 8</h2>
    <div id="products-grid" class="grid" aria-live="polite"></div>
  </section>

  <!-- MODAL (chi ti·∫øt s·∫£n ph·∫©m) -->
  <div id="product-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-card">
      <button class="close" id="modal-close" aria-label="ƒê√≥ng">‚úï</button>
      <img id="modal-img" class="modal-img" alt="">
      <div class="modal-body">
        <h3 id="modal-title" class="modal-title"></h3>
        <p id="modal-desc" class="modal-desc"></p>
        <div id="modal-price" class="modal-price"></div>
        <div class="modal-actions">
          <a id="modal-link" class="btn btn-primary" href="#" target="_blank" rel="noopener">Xem chi ti·∫øt</a>
          <a class="btn btn-ghost" href="#products">Ti·∫øp t·ª•c xem</a>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="container ft">
      <div class="ft-title">Li√™n h·ªá</div>
      <div class="ft-text">
        ‚òé <strong>Li√™n h·ªá:</strong> 0949 090 033 / 0912 274 788 / 0969 724 994 / 0962 004 680<br>
        üí¨ <strong>Zalo:</strong> 0949 090 033<br>
        üè¨ <strong>H·ªá th·ªëng gian h√†ng:</strong> <a href="https://bit.ly/HeThongLIZD-NaMat" target="_blank" rel="noopener">https://bit.ly/HeThongLIZD-NaMat</a><br>
        üõí <strong>Shopee:</strong> <a href="https://shopee.vn/lizdnamat" target="_blank" rel="noopener">https://shopee.vn/lizdnamat</a>
      </div>
    </div>
    <div class="container copy">¬© <span id="year"></span> NaMat LIZD. All rights reserved.</div>
  </footer>

  <!-- N√öT ADMIN -->
  <a id="admin-btn" href="/admin" title="M·ªü b·∫£ng ƒëi·ªÅu khi·ªÉn">‚öô Admin</a>

  <script>
  // ===== Utils =====
  const setIf = (v, fn) => { if (v !== undefined && v !== null && v !== '') fn(v); };
  const $ = (id) => document.getElementById(id);

  // ===== Hero loader (Netlify CMS) =====
  (async function loadHero(){
    const paths = ['site_data/content.json','/site_data/content.json','data/hero.json','/data/hero.json'];
    for (const p of paths){
      try{
        const res = await fetch(p, {cache:'no-store'});
        if(!res.ok) continue;
        const cfg = await res.json();
        const hero = cfg.hero ? cfg.hero : cfg; // ch·∫•p nh·∫≠n c·∫£ 2 c·∫•u tr√∫c
        setIf(hero.background || hero.bg, v => $('heroBg').style.backgroundImage = `url('${v}')`);
        setIf(hero.kicker || cfg.kicker, v => $('heroKicker').textContent = v);
        setIf(hero.title  || cfg.title , v => $('heroTitle').textContent  = v);
        setIf(hero.subtitle || hero.desc || cfg.desc, v => $('heroDesc').textContent = v);
        const cta1Text = hero.ctaText || hero?.cta1?.text || cfg?.cta1?.text;
        const cta1Href = hero.ctaLink || hero?.cta1?.href || cfg?.cta1?.href;
        const cta2Text = hero?.cta2?.text || cfg?.cta2?.text;
        const cta2Href = hero?.cta2?.href || cfg?.cta2?.href;
        setIf(cta1Text, v => $('cta1').textContent = v);
        setIf(cta1Href, v => $('cta1').href = v);
        setIf(cta2Text, v => $('cta2').textContent = v);
        setIf(cta2Href, v => $('cta2').href = v);
        break;
      }catch(e){}
    }
  })();

  // ===== Products loader + modal =====
  (function products(){
    const grid = $('products-grid');
    const modal = $('product-modal');
    const closeBtn = $('modal-close');
    const mImg = $('modal-img'), mTitle = $('modal-title'), mDesc = $('modal-desc'), mPrice = $('modal-price'), mLink = $('modal-link');

    const productPaths = ['/products.json','/products','/site_data/products.json','/data/products.json'];

    function normalizeItem(p){
      const name = p.name || p.title || 'S·∫£n ph·∫©m';
      const desc = p.description || p.desc || '';
      const price = p.price || p.price_range || p.priceText || '';
      const link = p.link || p.url || '#';
      const image =
        p.image || p.image_url || p.imageUrl ||
        (Array.isArray(p.images) ? p.images[0] : '') ||
        p.thumbnail || '';
      const images = Array.isArray(p.images) ? p.images : (image ? [image] : []);
      return {name,desc,price,link,image,images};
    }

    function cardHTML(p){
      return `
        <article class="card">
          ${p.image ? `<img class="thumb" src="${p.image}" alt="${p.name}" data-click="open">` : `<div class="thumb" data-click="open"></div>`}
          <div class="body">
            <div class="title" data-click="open">${p.name}</div>
            ${p.desc ? `<div class="desc" style="color:var(--muted);margin-bottom:6px">${p.desc}</div>` : ``}
            ${p.price ? `<div class="price">${p.price}</div>` : ``}
            <div style="margin-top:8px"><a class="plink" href="${p.link}" target="_blank" rel="noopener">Xem chi ti·∫øt</a></div>
          </div>
        </article>
      `;
    }

    function openModal(p){
      mImg.src = p.image || ''; mImg.alt = p.name || '';
      mTitle.textContent = p.name || 'S·∫£n ph·∫©m';
      mDesc.textContent = p.desc || '';
      mPrice.textContent = p.price || '';
      mLink.href = p.link || '#';
      modal.classList.add('show');
    }
    function closeModal(){ modal.classList.remove('show'); }

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });

    grid.addEventListener('click', (e)=>{
      const el = e.target.closest('[data-click="open"]');
      if(!el) return;
      const card = e.target.closest('.card');
      const idx = [...grid.children].indexOf(card);
      if(idx < 0) return;
      openModal(items[idx]);
    });

    let items = [];
    (async function loadProducts(){
      for(const p of productPaths){
        try{
          const r = await fetch(p, {cache:'no-store'});
          if(!r.ok) continue;
          const raw = await r.json();
          const list = Array.isArray(raw) ? raw : (Array.isArray(raw.data) ? raw.data : []);
          if(!list.length) continue;
          items = list.map(normalizeItem);
          grid.innerHTML = items.map(cardHTML).join('');
          break;
        }catch(e){}
      }
    })();
  })();

  // ===== Misc =====
  $('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
